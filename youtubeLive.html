<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CTC</title>
    <link rel="icon" type="image/jpg" href="assets/ctcooljc-noBG.png" />

    <link rel="stylesheet" href="styles/general.css" />
    <link rel="stylesheet" href="styles/youtubeLive/youtubeLiveNav.css" />
    <link rel="stylesheet" href="styles/youtubeLive/nowLive.css" />
    <link rel="stylesheet" href="styles/footer.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton+SC&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Live navbar section -->
    <header class="youtube-live-navbar-section">
      <nav class="youtube-live-navbar">
        <div class="left-nav">
          <div class="img-area">
            <a href="home.html">
              <img
                class="church-logo"
                src="/assets/ctcooljc-noBG.png"
                alt="church-logo"
              />
            </a>
          </div>
        </div>

        <div class="right-nav">
          <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="mothers.html">Mothers</a></li>
            <li><a href="baptism.html">Baptisms</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="donation.html">Donation</a></li>
          </ul>
        </div>

        <div class="hamburger">
          <button id="bTn">
            <img
              class="hamburger-icon"
              src="/assets/icons/hamburger.png"
              alt="hamburger-icon"
            />
          </button>
        </div>

        <div id="menu" class="menu">
          <button id="closeMenu" class="close-menu">&times;</button>
          <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="mothers.html">Mothers</a></li>
            <li><a href="baptism.html">Baptisms</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="donation.html">Donation</a></li>
          </ul>
        </div>
      </nav>
    </header>
    <script>
      document.getElementById("bTn").addEventListener("click", function () {
        document.getElementById("menu").classList.toggle("active");
      });

      document.addEventListener("click", function (event) {
        const menu = document.getElementById("menu");
        const menuButton = document.getElementById("bTn");

        if (
          !menu.contains(event.target) &&
          !menuButton.contains(event.target)
        ) {
          menu.classList.remove("active");
        }
      });

      document
        .getElementById("closeMenu")
        .addEventListener("click", function () {
          document.getElementById("menu").classList.remove("active");
        });
    </script>

    <!--Live youtube section-->
    <section class="youtube-live-section">
      <a href="live.html">
        <button>Back to Services</button>
      </a>
      <h1>Live Now On YouTube!</h1>
      <div class="youtube-live-container">
        <!-- YouTube Live Video Embed -->
        <div class="youtube-live">
          <div id="youtubeVideo"></div>
          <!-- The live video iframe will be dynamically inserted here -->
        </div>

        <!-- YouTube Live Chat Embed -->
        <div class="live-chat">
          <div id="youtubeChat"></div>
          <!-- The live chat iframe will be dynamically inserted here -->
        </div>
      </div>
    </section>
    <!-- Add Script for Fetching YouTube Live Video ID -->
    <script>
      // Replace with your actual API Key and YouTube Channel ID
      const apiKey = "AIzaSyC3SXtbsbtVSqNRgZtySNneDj1FiAcDJBs"; // Your Google API Key
      const channelId = "UCc6508gRYgLCAFpzK3C6gzg"; // Your YouTube Channel ID

      // YouTube API URL to fetch live video details
      const apiUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&eventType=live&type=video&key=${apiKey}`;

      // Function to fetch the live video ID from YouTube Data API
      async function fetchLiveVideoId() {
        try {
          const response = await fetch(apiUrl);
          const data = await response.json();

          if (data.items && data.items.length > 0) {
            const videoId = data.items[0].id.videoId; // Extract the live video ID
            embedYouTubeContent(videoId); // Call the function to embed video and chat
          } else {
            document.getElementById("youtubeVideo").innerHTML =
              "<p>No live stream is currently active.</p>";
          }
        } catch (error) {
          console.error("Error fetching live video ID:", error);
        }
      }

      // Function to dynamically embed YouTube live video and chat
      function embedYouTubeContent(videoId) {
        // Embed YouTube Live Stream
        const videoEmbed = `<iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
        document.getElementById("youtubeVideo").innerHTML = videoEmbed;

        // Embed YouTube Live Chat (only if chat is enabled)
        const chatEmbed = `<iframe src="https://www.youtube.com/live_chat?v=${videoId}&embed_domain=yourwebsite.com" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
        document.getElementById("youtubeChat").innerHTML = chatEmbed;
      }

      // Fetch the live video ID on page load
      fetchLiveVideoId();
    </script>

    <script>
      function toggleBible() {
        const bibleContainer = document.getElementById("fullBible");
        if (
          bibleContainer.style.display === "none" ||
          bibleContainer.style.display === ""
        ) {
          bibleContainer.style.display = "block";
        } else {
          bibleContainer.style.display = "none";
        }
      }
    </script>

    <!--Footer section-->
    <footer>
      <div class="footer-container">
        <div class="footer-content">
          <p>
            C.T.C.O.O.L.J.C
            <span class="footer-year" id="footer-year"></span>
          </p>
          <div class="contact-info">
            <p>
              Secretary Sister Shannon Singletary Contact Information:
              843-372-5839
            </p>
            <p>Address: 385 McClam Rd, Cades, SC 29518</p>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
