<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CTC</title>
    <link rel="icon" type="image/jpg" href="assets/ctcooljc-noBG.png" />

    <link rel="stylesheet" href="/styles/general.css" />
    <link rel="stylesheet" href="/styles/baptisms/baptismsNav.css" />
    <link rel="stylesheet" href="/styles/baptisms/signup.css" />
    <link rel="stylesheet" href="/styles/baptisms/baptisms.css" />
    <link rel="stylesheet" href="/styles/footer.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton+SC&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Baptisms navbar section -->
    <header class="baptisms-navbar-section">
      <nav class="baptisms-navbar">
        <div class="left-nav">
          <div class="img-area">
            <a href="home.html">
              <img
                class="church-logo"
                src="/assets/ctcooljc-noBG.png"
                alt="church-logo"
              />
            </a>
          </div>
        </div>

        <div class="right-nav">
          <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="mothers.html">Mothers</a></li>
            <li><a href="live.html">Services</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="donation.html">Donate</a></li>
          </ul>
        </div>

        <div class="hamburger">
          <button id="bTn">
            <img
              class="hamburger-icon"
              src="/assets/icons/hamburger.png"
              alt="hamburger-icon"
            />
          </button>
        </div>

        <div id="menu" class="menu">
          <button id="closeMenu" class="close-menu">&times;</button>
          <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="mothers.html">Mothers</a></li>
            <li><a href="live.html">Services</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="donation.html">Donate</a></li>
          </ul>
        </div>
      </nav>
    </header>
    <script>
      document.getElementById("bTn").addEventListener("click", function () {
        document.getElementById("menu").classList.toggle("active");
      });

      document.addEventListener("click", function (event) {
        const menu = document.getElementById("menu");
        const menuButton = document.getElementById("bTn");

        if (
          !menu.contains(event.target) &&
          !menuButton.contains(event.target)
        ) {
          menu.classList.remove("active");
        }
      });

      document
        .getElementById("closeMenu")
        .addEventListener("click", function () {
          document.getElementById("menu").classList.remove("active");
        });
    </script>

    <!-- Baptism section -->
    <section class="baptism-section">
      <img
        src="assets/live-assets/baptisms/cross-on-water.png"
        alt="cross floating on water"
      />
      <h3 class="section-title">Community Temple Church Baptisms</h3>

      <div class="baptism-scripture-card">
        <div class="baptism-scripture-img">
          <img
            src="assets/live-assets/baptisms/bible-baptism.jpg"
            alt="Open Bible image"
          />
        </div>
        <h2 class="baptism-scripture-title">Scripture Inspiration</h2>
        <blockquote class="baptism-scripture-text">
          “Then Peter said unto them, Repent, and be baptized every one of you
          in the name of Jesus Christ for the remission of sins, and ye shall
          receive the gift of the Holy Ghost”
        </blockquote>
        <p class="baptism-scripture-reference">– Acts 2:38</p>
      </div>

      <div class="baptism-container">
        <div class="baptism-card" id="card-1">
          <h1>Baptism Of Michael (TJ)</h1>
          <p>May 19, 2024</p>
          <img
            src="assets/live-assets/baptisms/Micheal(TJ)-Baptism.jpg"
            alt="Baptism of Michael (TJ)"
          />
        </div>

        <div class="baptism-card" id="card-2">
          <h1>Baptism Of Collet Brown</h1>
          <p>May 26, 2024</p>
          <img
            src="assets/live-assets/baptisms/C-Baptism.jpg"
            alt="Baptism of Collet Brown"
          />
        </div>

        <div class="baptism-card" id="card-3">
          <h1>Baptism Of Kylie Brown and Eric Brand</h1>
          <p>June 2, 2024</p>
          <img
            src="assets/live-assets/baptisms/K-E-Baptism.jpg"
            alt="Baptism of Kylie Brown and Eric Brand"
          />
        </div>

        <div class="baptism-card" id="card-4">
          <h1>Baptism Of Lorenza Miller</h1>
          <p>June 16, 2024</p>
          <img
            src="assets/live-assets/baptisms/LM-Baptism.jpg"
            alt="Baptism of Lorenza Miller"
          />
        </div>

        <div class="baptism-card" id="card-5">
          <h1>Baptism Of Jerome Gunn</h1>
          <p>September 15, 2024</p>
          <img
            src="assets/live-assets/baptisms/JG-Baptism.jpg"
            alt="Baptism of Jerome Gunn"
          />
        </div>
      </div>
    </section>

    <!-- Signup section -->
    <section class="signup-section">
      <h1>
        If you wish to be baptized and take this meaningful step in your
        spiritual journey, enter your details below or contact Secretary Sister
        Shannon Singletary at 843-372-5839.
      </h1>

      <h3 class="signup-section-title">Sign Up for Baptism</h3>

      <!-- Form Section -->
      <form id="baptismForm" name="baptism" method="POST" data-netlify="true">
        <!-- Name field -->
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required />

        <!-- Email field (not required initially) -->
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" />

        <!-- Phone field (not required initially) -->
        <label for="phone">Phone Number:</label>
        <input
          type="tel"
          id="phone"
          name="phone"
          placeholder="123-456-7890 or 1234567890"
        />

        <!-- Preferred Baptism Date field -->
        <label for="baptism_date">Preferred Baptism Date:</label>
        <input type="date" id="baptism_date" name="baptism_date" required />

        <!-- Preferred Contact Method field -->
        <label>Preferred Contact Method:</label>
        <div class="radio-group">
          <input
            type="radio"
            id="contact-email"
            name="contact_preference"
            value="email"
            checked
          />
          <label for="contact-email">Email</label>

          <input
            type="radio"
            id="contact-phone"
            name="contact_preference"
            value="phone"
          />
          <label for="contact-phone">Phone</label>
        </div>

        <!-- Submit button -->
        <button type="submit">Submit</button>

        <!-- Loading Spinner -->
        <div id="loadingSpinner" style="display: none; margin-top: 20px">
          <img src="/path-to-your-spinner.gif" alt="Loading..." />
        </div>
      </form>

      <!-- Success Message -->
      <p
        id="confirmationMessage"
        style="display: none; color: green; font-weight: bold"
      >
        Thank you! Your baptism sign-up has been received.
        <br />
        We will contact you via your preferred method:
        <span id="contactMethod"></span>.
      </p>

      <!-- Reassurance Note -->
      <p style="margin-top: 20px; color: #333; font-size: 14px">
        Your information is secure, and we will contact you via your preferred
        method (email or phone). Thank you for taking this important step.
      </p>

      <script>
        // Form Submission with custom handling
        document
          .getElementById("baptismForm")
          .addEventListener("submit", function (event) {
            event.preventDefault(); // Prevent page reload

            const emailInput = document.getElementById("email");
            const phoneInput = document.getElementById("phone");
            const contactPreference = document.querySelector(
              'input[name="contact_preference"]:checked'
            ).value;

            const emailValue = emailInput.value.trim();
            const phoneValue = phoneInput.value.trim();
            const phonePattern = /^(\d{3}-\d{3}-\d{4}|\d{10})$/;

            // Ensure at least one field is filled (email or phone)
            if (!emailValue && !phoneValue) {
              alert("Please enter either an email or phone number.");
              return;
            }

            // Validate phone format (with or without dashes)
            if (phoneValue && !phonePattern.test(phoneValue)) {
              phoneInput.setCustomValidity(
                "Phone number must be 10 digits, with or without dashes."
              );
              phoneInput.reportValidity();
              return;
            }

            // Prepare FormData and remove the unchosen method
            const formData = new FormData(this);

            if (contactPreference === "email") {
              // Remove phone data if email is preferred
              formData.delete("phone");
            } else if (contactPreference === "phone") {
              // Remove email data if phone is preferred
              formData.delete("email");
            }

            // Show the loading spinner
            document.getElementById("loadingSpinner").style.display = "block";

            // Simulate form submission using Netlify
            fetch("/", {
              method: "POST",
              body: formData,
            })
              .then((response) => {
                document.getElementById("loadingSpinner").style.display =
                  "none"; // Hide spinner
                if (response.ok) {
                  // Hide the form
                  document.getElementById("baptismForm").style.display = "none";
                  // Show the confirmation message
                  document.getElementById("confirmationMessage").style.display =
                    "block";
                  document.getElementById("contactMethod").textContent =
                    contactPreference.charAt(0).toUpperCase() +
                    contactPreference.slice(1);
                } else {
                  alert(
                    "There was a problem submitting the form. Please try again."
                  );
                }
              })
              .catch((error) => {
                document.getElementById("loadingSpinner").style.display =
                  "none"; // Hide spinner
                console.error("Form submission error:", error);
                alert(
                  "There was a problem submitting the form. Please try again."
                );
              });
          });
      </script>
    </section>

    <!--Footer section-->
    <footer>
      <div class="footer-container">
        <div class="footer-content">
          <p>
            C.T.C.O.O.L.J.C
            <span class="footer-year" id="footer-year"></span>
          </p>
          <div class="contact-info">
            <p>
              Secretary Sister Shannon Singletary Contact Information:
              843-372-5839
            </p>
            <p>Address: 385 McClam Rd, Cades, SC 29518</p>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
